<div class="reset-password-container">
  <div class="reset-password-card">
    <h2>{{ MESSAGES.TITLE }}</h2>

    <div *ngIf="isLoading" class="loading">
      <p>{{ MESSAGES.VALIDATING_LINK }}</p>
    </div>

    <div *ngIf="isInvalidLink" class="error-message">
      <p>{{ MESSAGES.INVALID_LINK }}</p>
      <button (click)="navigateToForgotPassword()" class="btn-secondary">
        {{ MESSAGES.REQUEST_NEW_LINK }}
      </button>
    </div>

    <form *ngIf="!isLoading && !isInvalidLink" [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="reset-form">
      <div class="form-group">
        <label for="password">{{ MESSAGES.NEW_PASSWORD_LABEL }}</label>
        <input
          type="password"
          id="password"
          formControlName="password"
          [placeholder]="MESSAGES.NEW_PASSWORD_PLACEHOLDER"
          class="form-input">
        <div *ngIf="resetForm.get('password')?.invalid && resetForm.get('password')?.touched" class="error-text">
          <span *ngIf="resetForm.get('password')?.errors?.['required']">{{ MESSAGES.PASSWORD_REQUIRED }}</span>
          <span *ngIf="resetForm.get('password')?.errors?.['minlength']">{{ MESSAGES.PASSWORD_MIN_LENGTH }}</span>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">{{ MESSAGES.CONFIRM_PASSWORD_LABEL }}</label>
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          [placeholder]="MESSAGES.CONFIRM_PASSWORD_PLACEHOLDER"
          class="form-input">
        <div *ngIf="resetForm.get('confirmPassword')?.invalid && resetForm.get('confirmPassword')?.touched" class="error-text">
          <span *ngIf="resetForm.get('confirmPassword')?.errors?.['required']">{{ MESSAGES.CONFIRM_PASSWORD_REQUIRED }}</span>
          <span *ngIf="resetForm.get('confirmPassword')?.errors?.['passwordMismatch']">{{ MESSAGES.PASSWORDS_DO_NOT_MATCH }}</span>
        </div>
      </div>

      <button
        type="submit"
        [disabled]="resetForm.invalid || isSubmitting"
        class="btn-primary">
        <span *ngIf="isSubmitting">{{ MESSAGES.RESETTING }}</span>
        <span *ngIf="!isSubmitting">{{ MESSAGES.RESET_PASSWORD }}</span>
      </button>
    </form>    <div *ngIf="successMessage" class="success-message">
      <p>{{ successMessage }}</p>
      <button (click)="navigateToLogin()" class="btn-primary">{{ MESSAGES.GO_TO_LOGIN }}</button>
    </div>

    <div *ngIf="errorMessage" class="error-message">
      <p>{{ errorMessage }}</p>
    </div>
  </div>
</div>
