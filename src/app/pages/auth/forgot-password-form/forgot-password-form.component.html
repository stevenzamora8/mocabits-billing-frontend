<!-- Alert Component -->
<app-alert
  *ngIf="showAlertComponent"
  [message]="alertMessage"
  [type]="alertType"
  [dismissible]="true"
  (closed)="onAlertClosed()">
</app-alert>

<!-- Contenedor principal centrado -->
<div class="forgot-password-container">
  <!-- Formulario de Recuperación -->
  <div *ngIf="currentStep === 'form'" class="auth-section">
    <div class="welcome-header">
      <h1>Recuperar Contraseña</h1>
      <p class="welcome-subtitle">Ingresa tu correo electrónico para recibir instrucciones de recuperación</p>
    </div>

    <form class="auth-form" [formGroup]="recoveryForm" (ngSubmit)="onSendRecoveryEmail()">
      <div class="form-group">
        <app-input
          label="Correo Electrónico"
          placeholder="correo@empresa.com"
          formControlName="email"
          type="email"
          [disabled]="isLoading">
        </app-input>
      </div>

      <div class="form-actions">
        <app-button
          type="submit"
          variant="primary"
          size="lg"
          [disabled]="recoveryForm.invalid || isLoading"
          [loading]="isLoading"
          [fullWidth]="true">
          {{ isLoading ? 'Enviando instrucciones...' : 'Enviar Correo de Recuperación' }}
        </app-button>
      </div>

      <div class="form-footer">
        <app-button
          variant="ghost"
          size="sm"
          (click)="goToLogin()">
          ← Volver al inicio de sesión
        </app-button>
      </div>
    </form>
  </div>

  <!-- Mensaje de éxito del envío -->
  <div *ngIf="currentStep === 'success'" class="success-message login-success">
    <div class="success-icon">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
        <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.89 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
      </svg>
    </div>
    <h3>¡Correo Enviado!</h3>
    <p>Se han enviado las instrucciones de recuperación a tu correo electrónico.</p>
    <p class="redirect-message">Redirigiendo al inicio de sesión...</p>
    <div *ngIf="showSuccessLoadingBar" class="loading-bar">
      <div class="progress"></div>
    </div>
  </div>
</div>